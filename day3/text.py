import math as m, re

board = list(open('data.txt'))
chars = {(r, c): [] for r in range(140) for c in range(140)
                    if board[r][c] not in '01234566789.'}

# print(chars)

for r, row in enumerate(board):
    for n in re.finditer(r'\d+', row):
        edge = {(r, c) for r in (r-1, r, r+1)
                       for c in range(n.start()-1, n.end()+1)}

        for o in edge & chars.keys():
            chars[o].append(int(n.group()))

# print(chars)

# print(sum(sum(p)    for p in chars.values()),
#       sum(m.prod(p) for p in chars.values() if len(p)==2))

x = (list(p for p in chars.values() if len(p) == 2))
answer = [tuple(t) for t in x]
my_answer = [(264, 111), (528, 789), (618, 786), (642, 505), (58, 832), (647, 262), (964, 690), (474, 302), (951, 346), (984, 111), (198, 425), (192, 169), (87, 146), (816, 588), (535, 776), (36, 290), (579, 716), (536, 400), (733, 399), (260, 281), (78, 462), (599, 369), (800, 321), (326, 93), (889, 947), (603, 657), (966, 676), (926, 17), (479, 465), (909, 339), (419, 895), (399, 662), (589, 509), (198, 734), (321, 877), (344, 955), (694, 958), (717, 197), (707, 370), (428, 468), (973, 987), (150, 462), (555, 42), (504, 352), (688, 22), (306, 374), (406, 370), (644, 503), (87, 303), (505, 432), (760, 138), (593, 689), (456, 39), (563, 883), (837, 449), (230, 891), (404, 424), (287, 350), (531, 91), (72, 359), (766, 658), (780, 335), (613, 539), (96, 959), (835, 141), (832, 364), (772, 919), (798, 426), (138, 206), (999, 367), (202, 788), (971, 557), (488, 788), (404, 139), (448, 196), (211, 521), (588, 987), (961, 214), (324, 391), (532, 25), (85, 810), (75, 173), (776, 384), (457, 470), (467, 114), (43, 52), (412, 914), (514, 278), (809, 144), (295, 519), (147, 42), (859, 421), (346, 502), (361, 348), (750, 175), (833, 925), (137, 399), (42, 636), (26, 560), (238, 479), (539, 619), (109, 283), (137, 530), (502, 351), (15, 231), (840, 43), (573, 847), (571, 804), (364, 10), (605, 491), (447, 964), (344, 46), (691, 345), (169, 218), (399, 564), (772, 155), (161, 546), (671, 593), (726, 815), (483, 469), (968, 887), (591, 637), (806, 81), (120, 51), (813, 236), (667, 963), (188, 816), (52, 919), (846, 590), (338, 116), (258, 926), (316, 594), (390, 40), (559, 827), (779, 392), (500, 993), (220, 307), (830, 828), (89, 105), (363, 166), (337, 378), (565, 886), (638, 668), (95, 742), (938, 78), (283, 110), (937, 838), (991, 880), (472, 810), (447, 76), (911, 627), (795, 623), (769, 816), (604, 805), (597, 192), (851, 859), (841, 712), (2, 585), (443, 513), (14, 19), (900, 277), (155, 471), (124, 115), (693, 152), (786, 822), (631, 164), (11, 606), (796, 956), (850, 124), (824, 761), (278, 965), (792, 801), (11, 202), (971, 303), (444, 288), (407, 552), (558, 80), (321, 688), (852, 510), (217, 82), (806, 316), (235, 210), (964, 466), (795, 891), (862, 114), (945, 974), (201, 624), (220, 927), (819, 252), (184, 499), (586, 581), (950, 35), (855, 528), (618, 901), (408, 904), (4, 25), (175, 611), (157, 566), (659, 668), (762, 2), (808, 587), (878, 652), (44, 919), (209, 848), (504, 951), (817, 611), (639, 548), (900, 975), (817, 100), (691, 387), (256, 675), (746, 192), (307, 954), (339, 474), (923, 94), (150, 894), (80, 316), (515, 97), (199, 838), (803, 671), (133, 898), (349, 805), (985, 841), (77, 506), (622, 332), (964, 934), (252, 548), (640, 985), (407, 729), (608, 471), (142, 225), (82, 844), (509, 88), (447, 374), (758, 573), (374, 940), (231, 98), (775, 64), (587, 691), (59, 50), (135, 324), (186, 175), (167, 426), (105, 184), (432, 737), (682, 779), (227, 385), (186, 85), (696, 862), (344, 164), (65, 233), (277, 23), (123, 577), (20, 785), (442, 89), (757, 22), (406, 767), (877, 510), (572, 815), (295, 741), (354, 864), (858, 95), (745, 894), (705, 590), (718, 878), (797, 312), (890, 149), (765, 581), (57, 44), (881, 210), (627, 921), (633, 253), (151, 201), (942, 450), (14, 920), (889, 583), (127, 681), (85, 106), (16, 969), (512, 376), (48, 61), (823, 65), (716, 199), (769, 488), (509, 420), (106, 133), (81, 142), (139, 134), (95, 522), (985, 592), (831, 169), (915, 914), (353, 694), (365, 678), (570, 405), (582, 515), (38, 608), (506, 362), (811, 642), (623, 262), (92, 365), (156, 617)]

temp3 = []
for element in answer:
    if element not in my_answer:
        temp3.append(element)
 
print(temp3)

# print(answer)